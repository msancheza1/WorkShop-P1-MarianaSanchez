<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ movie.title }}</title>

    {% load static %}
    <link rel="stylesheet" href="{% static 'styles.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

<div class="container my-5">

    <div class="row">
        <div class="col-md-4">
            <img src="{{ movie.image.url }}" class="img-fluid rounded">
        </div>

        <div class="col-md-8">
            <h1>{{ movie.title }}</h1>
            <p>{{ movie.description }}</p>

            <a href="{{ movie.trailer_url }}" target="_blank"
               class="btn btn-danger mt-2">
                â–¶ Watch Trailer
            </a>
        </div>
    </div>

    <hr class="my-4">


    <!-- ADD REVIEW -->
    <h4>Add a review</h4>

    <form method="post">
        {% csrf_token %}
        <input type="text" name="author" class="form-control mb-2"
               placeholder="Your name" required>

        <textarea name="content" class="form-control mb-2"
                  placeholder="Write your review" required></textarea>

        <button class="btn btn-primary">Post Review</button>
    </form>

</div>

<div class="reviews-section">
    <h3>Reviews</h3>

    {% if reviews %}
        {% for review in reviews %}
            <div class="review-card">

                <div class="review-header">
                    <span class="review-author">{{ review.author }}</span>
                    <span class="review-date">{{ review.created_at|date:"M d, Y" }}</span>
                </div>

                <p class="review-content">
                    {{ review.content|linebreaks }}
                </p>

                {% if user.is_authenticated %}
                    <div class="review-actions">
                        <a href="{% url 'delete_review' review.id %}">Delete</a>
                    </div>
                {% endif %}

            </div>
        {% endfor %}
    {% else %}
        <p>No reviews yet. Be the first to write one!</p>
    {% endif %}
</div>



<div class="movie-grid">
    {% for movie in movies %}
        <a href="{% url 'movie_detail' movie.id %}" class="movie-card">
            <img src="{{ movie.image.url }}" alt="{{ movie.title }}">
            <h4>{{ movie.title }}</h4>
        </a>
    {% endfor %}
</div>


</body>
</html>
